// TODO: split reply mechanism from process
